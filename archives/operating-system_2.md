# オペレーティングシステム

### 20190408

## メモリ管理

- MMU (Memory Management Unit)
	- 仮想アドレスから物理アドレスに変換するハード
- CPUがコードを実行するとき, 0x0000 (仮想) + ベースアドレス (物理メモリでのオンセット) の処理をしなければならない

## 入出力デバイス (I/Oデバイス) 

- キーボード, プリンタ, ネットワークなど
- BUSでつながっている

## デバイスコントローラのデータ転送方式

- ビジー・ウェイト Busy wait
	- データが来るまでアクセスして待つ
- 割り込み Interrupt
- DMA Direct Memory Access
	- CPUを介する事無く, メモリからI/Oデバイスに処理を渡すことができる

## OS

- コンピュータハードウェアの抽象化
	- ローレベルなハードを意識することなく実行できるようにする
	- 同時に複数のアプリプログラムが他のアプリの状況を意識せず実行できる
- OSは, ユーザープログラムに対して死してムコールというインターフェイスによって機能を提供している
- システムコールに出来不出来が, OSの価値を決める
	- シンプルかつ多様な機能の提供が重要

## システムコールは, OSの機能の呼び出し

- OSのユーザープログラムのインターフェイスがシステムコール
- OSによってシステムコールは変わる

## プロセス

- プログラムを実行するためのもの
- プロセスごとにプロセスを管理するための情報がある
- コンテクストスイチ
	- 親子関係の入れ替え
- forkシステムコール: プロセスの生成
- forkのリターンバリュー
	- 親プロセスは子プロセスのID
	- 子プロセスは0
	- エラーは-1
- waitシステムコールは, 子プロセスの終了を待つ
- exitシステムコールは, プロセスの終了

## プロセスは, 皿! プログラムは, 具!

- OSというテーブルに載せられたお皿 (全部同じ) 
- そのお皿にもられた食事 (様々な種類) 
- 食事をするユーザ

## CPUとプロセス

- TSS: Time Sharing System
- 10ms-100msの単位でプロセスを入れ替える, 瞬間的には1つのプロセスしか動いていない

## プロセスが作られるタイミング
- システムのboot時
- 実行中のプロセスから新しいプロセせうが作られる
- ユーザによる新しいプロセスの作成

## プロセスの終了
- 正常に終了 (自発的) 
- エラーで終了 (自発的)
- 致命的エラーにょって終了 (非自発的)
- 他のプロセスからの強制終了 (非自発的)

## プロセスの開始

- boot時にinitが実行される
- ユーザーがログインをすると, 会話が開始される

## プロセスの状態遷移

1. 
2. 
3. 
4. 

## スレッド

- プロセス: 1つのアドレス空間と1つの制御スレッド





















